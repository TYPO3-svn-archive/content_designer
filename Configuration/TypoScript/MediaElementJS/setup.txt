page.includeCSS.mediaelementjs  = EXT:content_designer/Resources/Public/JavaScript/mediaelementjs/mediaelementplayer.css
page.includeJS.mediaelementjs01 = EXT:content_designer/Resources/Public/JavaScript/mediaelementjs/mediaelement-and-player.min.js
page.includeJS.mediaelementjs02 = EXT:content_designer/Resources/Public/JavaScript/mediaelementjs.js

plugin.tx_contentdesigner._CSS_DEFAULT_STYLE (
	.mediajs {
		width: 100%;
		max-width: 640px;
		margin: 0 auto;
	}
)

tt_content.tx_contentdesigner_mediaelementjs < plugin.tx_contentdesigner
tt_content.tx_contentdesigner_mediaelementjs.settings {
  title       = Media
  description = Audio, Video & YouTube
  
  icon      = ../typo3conf/ext/content_designer/Resources/Public/Icons/MediaElementJS/ce_wiz.gif
  iconSmall = ../typo3conf/ext/content_designer/Resources/Public/Icons/MediaElementJS/ext_icon.gif
  
  cObjectFlexFile = EXT:content_designer/Configuration/FlexForms/MediaElementJS.xml
  
  previewObj = COA
  previewObj {
	10 = TEXT
	10.field = caption
	10.wrap  = |<br>
  }
  
  renderObj = COA
  renderObj {
    wrap = <div class="mediajs">|</div>
  
    20 = COA
	20 {
	  wrap = <video controls="controls" style="width:100%;height:100%;" width="100%" height="100%" preload="none">|</video>
	  if.value.field = type
	  if.equals = video
	  
	  10 = TEXT
	  10.value = <source type="
	  
	  20 = CASE
	  20 {
	    key.cObject = TEXT
		key.cObject {
		  field = videoFile
		  replacement {
		    10.search = /^.*\.([a-z0-9]{1,4})$/i
			10.useRegExp = 1
			10.replace = \1
		  }
		}
		
		default = TEXT
		default.value = video/mp4
		
		ogg < .default
		ogg.value = video/ogg
		
		webm < .default
		webm.value = video/webm
		
		ogv < .default
		ogv.value = video/ogg
		
		wlv < .default
		wlv.value = video/wlv
		
		flv < .default
		flv.value = video/flash
	  }
	  
	  30 = TEXT
	  30.field = videoFile
	  30.wrap  = " src="|" />
	}
  
    30 = TEXT
	30.field = mediaUrl
	30.wrap = <video controls="controls" style="width:100%;height:100%;" width="100%" height="100%"><source type="video/youtube" src="|" /></video>
	30.if.value.field = type
	30.if.equals = youtube
	
	40 = TEXT
	40.field = audioFile
	40.wrap  = <audio controls="controls" style="width:100%;" width="100%"><source type="audio/mp3" src="|" /></audio>
	40.if.value.field = type
	40.if.equals = audio
	
	50 = TEXT
	50.field = caption
	50.wrap = <sub>|</sub>
  }
}